#!/usr/bin/env bash
# vi: ft=bash:ts=2:sw=2

# shellcheck source=executable___common.sh
source "${HOME}/.local/bin/__common.sh"

CITY="bergen"

# Usage: wttr [options] [location]
# Parse flags
# -h, --help
# -n, --no-less

while [[ $# -gt 0 ]]; do
  case $1 in
  -h | --help)
    cat <<EOF
Usage: $0 [options] [location]
Options:
  -h, --help    Show this help message and exit.
EOF
    exit 0
    ;;
  *)
    CITY="$1"
    shift
    ;;
  esac
done

url="https://v2.wttr.in/${CITY}?0FM&lang=en"

echo "Opening ${url}"

page=$(curl -s "${url}")

pager "${page}"
