#!/usr/bin/env bash
# shellcheck shell=bash
# vi: ft=bash:ts=4:sw=4

# shellcheck source=executable___common.sh
source "$HOME/.local/bin/__common.sh"

: "
# Created by: archinstall
# Created on: 2023-08-22_13-54-02
title   Arch Linux (linux-regular-linux-not-lts)
linux   /vmlinuz-linux
initrd  /amd-ucode.img
initrd  /initramfs-linux.img
options root=PARTUUID=7cd14ea6-29fc-4a1d-b4d1-c380185c0442 zswap.enabled=0 rw rootfstype=ext4

# Created by: archinstall
# Created on: 2023-08-22_13-54-02
title   Arch Linux (linux-fallback)
linux   /vmlinuz-linux
initrd  /amd-ucode.img
initrd  /initramfs-linux-fallback.img
options root=PARTUUID=7cd14ea6-29fc-4a1d-b4d1-c380185c0442 zswap.enabled=0 rw rootfstype=ext4

# Created by: archinstall
# Created on: 2023-08-22_13-54-02
title   Arch Linux (linux-lts)
linux   /vmlinuz-linux-lts
initrd  /amd-ucode.img
initrd  /initramfs-linux-lts.img
options root=PARTUUID=7cd14ea6-29fc-4a1d-b4d1-c380185c0442 zswap.enabled=0 rw rootfstype=ext4

# Created by: archinstall
# Created on: 2023-08-22_13-54-02
title   Arch Linux (linux-lts-fallback)
linux   /vmlinuz-linux-lts
initrd  /amd-ucode.img
initrd  /initramfs-linux-lts-fallback.img
options root=PARTUUID=7cd14ea6-29fc-4a1d-b4d1-c380185c0442 zswap.enabled=0 rw rootfstype=ext4
"

readonly kernel_versions=(
    linux
    linux-lts
)

readonly initramfs_versions=(
    ""
    -fallback
)

readonly options=(
    "root=PARTUUID=7cd14ea6-29fc-4a1d-b4d1-c380185c0442"
    rootfstype=ext4
    rw
    "zswap.enabled=0"
    "lsm=landlock,lockdown,yama,integrity,apparmor,bpf"
)

for kernel in "${kernel_versions[@]}"; do
    for initramfs in "${initramfs_versions[@]}"; do

        cat <<EOF
# Generated by: $(basename "$0")
# Generated at: $(date +%Y-%m-%d_%H-%M-%S)
title Arch
version $kernel$initramfs
linux /vmlinuz-$kernel
initrd /amd-ucode.img
initrd /initramfs-$kernel$initramfs.img
options ${options[@]}
EOF
        echo
    done
done
